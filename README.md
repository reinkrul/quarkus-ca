# DISCLAIMER
**WARNING**: This project is intended for ***educational purposes*** and having fun with Quarkus/crypto/GraalVM/PKI. You should ***not*** use it to run your own production CA!

# Description
Quarkus CA demonstrates:
 * How to build your own CA using nothing but Java.
 * That implementing a PKI (Public Key Infrastructure) is a complex but certainly possible using the proper libraries
  (whether it's a good idea or not is a different matter). 
 * How to use Quarkus.
 * How to use JCA cryptographic operations on Quarkus.
 * How to use Bouncy Castle to issue certificates.

# Usage
To start the Quarkus development environment:
```
./mvnw compile quarkus:dev
```
Quarkus CA is now running and can be reached on http://localhost:8080. Upon its first boot, it generates the CA key and (self-signed) certificate, which is used to iussue
certificates. You can now issue server certificates using the web interface (PIN/password: **changeit**).

## Building the native image
Quarkus CA can also run as a native image built by GraalVM. To build it, run ***package*** using the ***native*** profile:
```
./mvnw package -Pnative
```

## Configuration
The following properties can be passed:

| Property                  | Default value | Description | 
|---|---|---|
| ca.commonName             | Quarkus CA    | Name of the CA. |
| ca.key.size               | 2048          | RSA key size of keys generated by the CA. |
| ca.certificate.validity   | 365           | Number of days that certificates (issued by the CA) are valid. |

## Enabling HTTPS
Upon first boot, a SSL/TLS server certificate is generated for the CA. To enable HTTPS (on port 8081) and use this certificate, pass the following properties to the CA:
```properties
quarkus.http.ssl-port=8081
quarkus.http.ssl.certificate.key-store-file=ca-web.jceks
quarkus.http.ssl.certificate.key-store-password=changeit
```
Passing these to the native image:
```
target/quarkus-ca-runner \
 -Dquarkus.http.ssl-port=8081 \
 -Dquarkus.http.ssl.certificate.key-store-file=ca-web.jceks \
 -Dquarkus.http.ssl.certificate.key-store-password=changeit
```